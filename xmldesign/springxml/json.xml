<beans xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="../schemas/websm.xsd">

    <!--*****************************系统后台管理*****************************-->
    <!--=============================系统用户管理=============================-->
    <!--*****************************以下内容禁止修改、删除，直到结尾END*****************************START-->
    <!--加载系统用户-->
    <json id="loadSysUser">
        <sqlquery key="data" datatype="list" totalrowsvar="total" pagevar="page" pagesizevar="rows">
            <sql><![CDATA[
            select *,getrolename(sysrole_id) as sysrolename,
            FROM_UNIXTIME(UNIX_TIMESTAMP(create_date),'%Y-%m-%d %H:%i:%s') AS create_date,
            FROM_UNIXTIME(UNIX_TIMESTAMP(update_date),'%Y-%m-%d %H:%i:%s') AS update_date from sysuser where is_sysadmin='否' and ((${sqlStr} is null) or (username like concat('%',${sqlStr},'%'))) order by create_date desc
            ]]></sql>
        </sqlquery>
        <output>
            <field key="rows" jxpath="data"/>
            <field key="total" jxpath="total"/>
        </output>
    </json>
    <!--修改用户-->
    <json id="editSysUser">
        <sqlquery key="data" datatype="void" resultvar="r" resultmsgvar="rmsg">
            <sql><![CDATA[
                update sysuser
                set sysrole_id=${sysroleid},update_date=now(),update_man=${loginName},remark=${remark}
                where sysuser_id=${sysuserid}
                ]]></sql>
        </sqlquery>
        <output>
            <field key="resultSet" jxpath="./data"/>
            <field key="result" jxpath="./r"/>
            <field key="errormessage" jxpath="./rmsg"/>
        </output>
    </json>
    <!--删除用户-->
    <json id="deleteSysUser">
        <sqlquery key="data" datatype="void" resultvar="r" resultmsgvar="rmsg">
            <sql>delete from sysuser where sysuser_id=${sysuserid}</sql>
        </sqlquery>
        <output>
            <field key="resultSet" jxpath="./data"/>
            <field key="result" jxpath="./r"/>
            <field key="errormessage" jxpath="./rmsg"/>
        </output>
    </json>
    <!--=============================系统菜单管理=============================-->
    <!--新建菜单-->
    <json id="addMenu">
        <sqlquery key="data" datatype="void" resultvar="r" resultmsgvar="rmsg">
            <sql><![CDATA[
                INSERT INTO sysmenu (sysmenu_id,sysmenu_name,sysmenu_url,parent_menuid,is_sysmanage_menu,sort,create_date,create_man,remark)
                VALUES(uuid(),${sysmenuname},${sysmenuurl},${parentmenuid},'否',${sort},now(),${loginName},${remark})
                ]]></sql>
        </sqlquery>
        <output>
            <field key="resultSet" jxpath="./data"/>
            <field key="result" jxpath="./r"/>
            <field key="errormessage" jxpath="./rmsg"/>
        </output>
    </json>
    <!--修改菜单-->
    <json id="editMenu">
        <sqlquery key="data" datatype="void" resultvar="r" resultmsgvar="rmsg">
            <sql><![CDATA[
                UPDATE sysmenu
                SET sysmenu_name=${sysmenuname},sysmenu_url=${sysmenuurl},
                    parent_menuid=${parentmenuid},sort=${sort},
                    update_date=now(),update_man=${loginName},
                    remark=${remark}
                WHERE sysmenu_id=${sysmenuid} and sysmenu_id!='2c659331-0d1a-11e6-b867-0025b6dd0800'
                ]]></sql>
        </sqlquery>
        <output>
            <field key="resultSet" jxpath="./data"/>
            <field key="result" jxpath="./r"/>
            <field key="errormessage" jxpath="./rmsg"/>
        </output>
    </json>
    <!--删除菜单-->
    <json id="deleteMenu">
        <sqlquery key="data" datatype="void" resultvar="r" resultmsgvar="rmsg">
            <sql>DELETE FROM sysmenu WHERE sysmenu_id=${sysmenuid} and is_sysmanage_menu='否'</sql>
        </sqlquery>
        <output>
            <field key="resultSet" jxpath="./data"/>
            <field key="result" jxpath="./r"/>
            <field key="errormessage" jxpath="./rmsg"/>
        </output>
    </json>
    <!--新建组织-->
    <json id="addOrganization">
        <sqlquery key="data" datatype="void" resultvar="r" resultmsgvar="rmsg">
            <sql><![CDATA[
                INSERT INTO organization (organizationId,organizationName,organizationParentId,organizationSort)
                VALUES(uuid(),${organizationName},${organizationParentId},${organizationSort})
                ]]></sql>
        </sqlquery>
        <output>
            <field key="resultSet" jxpath="./data"/>
            <field key="result" jxpath="./r"/>
            <field key="errormessage" jxpath="./rmsg"/>
        </output>
    </json>
    <!--修改组织-->
    <json id="editOrganization">
        <sqlquery key="data" datatype="void" resultvar="r" resultmsgvar="rmsg">
            <sql><![CDATA[
                UPDATE organization
                SET organizationName=${organizationName},organizationParentId=${organizationParentId},organizationSort=${organizationSort}
                WHERE organizationId=${organizationId} and organizationId!='2c659331-0d1a-11e6-b867-0025b6dd0800'
                ]]></sql>
        </sqlquery>
        <output>
            <field key="resultSet" jxpath="./data"/>
            <field key="result" jxpath="./r"/>
            <field key="errormessage" jxpath="./rmsg"/>
        </output>
    </json>
    <!--删除组织-->
    <json id="deleteOrganization">
        <sqlquery key="data" datatype="void" resultvar="r" resultmsgvar="rmsg">
            <sql>DELETE FROM organization WHERE organizationId=${organizationId}</sql>
        </sqlquery>
        <output>
            <field key="resultSet" jxpath="./data"/>
            <field key="result" jxpath="./r"/>
            <field key="errormessage" jxpath="./rmsg"/>
        </output>
    </json>
    <!--=============================系统角色管理=============================-->
    <!--加载系统角色-->
    <json id="loadSysRole">
        <sqlquery key="data" datatype="list" totalrowsvar="total" pagevar="page" pagesizevar="rows">
            <sql><![CDATA[
                select *,FROM_UNIXTIME(UNIX_TIMESTAMP(create_date),'%Y-%m-%d %H:%i:%s') AS create_date,FROM_UNIXTIME(UNIX_TIMESTAMP(update_date),'%Y-%m-%d %H:%i:%s') AS update_date
                from sysrole where
                is_sysrole in ('是','否') and ((${sqlStr} is null) or (sysrole_name like concat('%',${sqlStr},'%')))
                order by create_date desc
                ]]></sql>
        </sqlquery>
        <output>
            <field key="rows" jxpath="data"/>
            <field key="total" jxpath="total"/>
        </output>
    </json>
    <!--新建角色-->
    <json id="addRole">
        <sqlquery key="data" datatype="void" resultvar="r" resultmsgvar="rmsg">
            <sql><![CDATA[
                INSERT INTO sysrole (sysrole_id,sysrole_name,is_sysrole,create_date,create_man,remark)
                VALUES(uuid(),${sysrolename},'否',now(),${loginName},${remark})
                ]]></sql>
        </sqlquery>
        <output>
            <field key="resultSet" jxpath="./data"/>
            <field key="result" jxpath="./r"/>
            <field key="errormessage" jxpath="./rmsg"/>
        </output>
    </json>
    <!--修改角色-->
    <json id="editRole">
        <sqlquery key="data" datatype="void" resultvar="r" resultmsgvar="rmsg">
            <sql><![CDATA[
                UPDATE sysrole SET
                  sysrole_name=${sysrolename},update_date=now(),update_man=${loginName},remark=${remark}
                  WHERE sysrole_id=${sysroleid} ;
                ]]></sql>
        </sqlquery>
        <output>
            <field key="resultSet" jxpath="./data"/>
            <field key="result" jxpath="./r"/>
            <field key="errormessage" jxpath="./rmsg"/>
        </output>
    </json>
    <!--删除角色-->
    <json id="deleteRole">
        <sqlquery key="data" datatype="void" resultvar="r" resultmsgvar="rmsg">
            <sql>DELETE FROM sysrole WHERE sysrole_id=${sysroleid} and sysrole_id!='fe785f38-0baf-11e6-883e-0025b6dd0800'</sql>
        </sqlquery>
        <output>
            <field key="resultSet" jxpath="./data"/>
            <field key="result" jxpath="./r"/>
            <field key="errormessage" jxpath="./rmsg"/>
        </output>
    </json>
    <!--角色权限，加载角色名称-->
    <json id="getRoleName">
        <sqlquery key="data" datatype="list" totalrowsvar="total" >
            <sql>SELECT * FROM sysrole where is_sysrole!='2654264'</sql>
        </sqlquery>
        <output>
            <field key="rows" jxpath="./data"/>
            <field key="total" jxpath="./total"/>
        </output>
    </json>
    <!--角色权限，获取选中角色的权限菜单-->
    <json id="getRoleMenu">
        <sqlquery key="data" datatype="list" resultvar="r" resultmsgvar="rmsg">
            <sql>SELECT * FROM sysrolemenu where sysrole_id=${sysroleId}</sql>
        </sqlquery>
        <output>
            <field key="resultSet" jxpath="./data"/>
            <field key="result" jxpath="./r"/>
            <field key="errormessage" jxpath="./rmsg"/>
        </output>
    </json>
    <!--加载访问次数-->
    <json id="loadStatistics">
        <sqlquery key="data" datatype="list" totalrowsvar="total" pagevar="page" pagesizevar="rows">
            <sql><![CDATA[
               SELECT *,CONCAT(CAST(`count` AS  CHAR),'次') AS `count`  FROM statistics ORDER BY statisticsName
                ]]></sql>
        </sqlquery>
        <output>
            <field key="rows" jxpath="data"/>
            <field key="total" jxpath="total"/>
        </output>
    </json>
    <!--加载前台首页背景图片信息-->
    <json id="loadbgimg">
        <sqlquery key="data" datatype="list" totalrowsvar="total" pagevar="page" pagesizevar="rows">
            <sql><![CDATA[
            select *,FROM_UNIXTIME(UNIX_TIMESTAMP(updatetime),'%Y-%m-%d') AS updatetime from backgroundimage
            ]]></sql>
        </sqlquery>
        <output>
            <field key="rows" jxpath="data"/>
            <field key="total" jxpath="total"/>
        </output>
    </json>
    <!--修改前台首页背景图片信息-->
    <json id="updatebgimg">
        <sqlquery key="data" datatype="void" resultvar="r" resultmsgvar="rmsg">
            <sql><![CDATA[
              UPDATE backgroundimage SET imgname = ${imgname},updatetime=now() WHERE bg_key = ${bgkey}
                ]]></sql>
        </sqlquery>
        <output>
            <field key="resultSet" jxpath="./data"/>
            <field key="result" jxpath="./r"/>
            <field key="errormessage" jxpath="./rmsg"/>
        </output>
    </json>
    <!--加载关于我们的内容-->
    <json id="loadAboutUs">
    <sqlquery key="data" datatype="list" totalrowsvar="total" pagevar="page" pagesizevar="rows">
    <sql><![CDATA[
    SELECT * FROM aboutus
    ]]></sql>
    </sqlquery>
    <output>
    <field key="rows" jxpath="data"/>
    <field key="total" jxpath="total"/>
    </output>
    </json>
    <json id="editAboutUs">
        <sqlquery key="data" datatype="void" resultvar="r" resultmsgvar="rmsg">
            <sql><![CDATA[
            UPDATE aboutus SET aboutus = ${aboutus} WHERE ID =0000
                ]]></sql>
        </sqlquery>
        <output>
            <field key="resultSet" jxpath="./data"/>
            <field key="result" jxpath="./r"/>
            <field key="errormessage" jxpath="./rmsg"/>
        </output>
    </json>
    <!--友情链接信息的加载-->
    <json id="loadblogrollInfo">
        <sqlquery key="data" datatype="list" totalrowsvar="total" pagevar="page" pagesizevar="rows">
            <sql><![CDATA[
            SELECT * FROM blogroll ORDER BY blogrollId
            ]]></sql>
        </sqlquery>
        <output>
            <field key="rows" jxpath="data"/>
            <field key="total" jxpath="total"/>
        </output>
    </json>
    <!--友情链接的增加-->
    <json id="addblogrollInfo">
        <sqlquery key="data" datatype="void" resultvar="r" resultmsgvar="rmsg">
            <sql><![CDATA[
                INSERT INTO blogroll
               (blogrollId,linkAddress,linkName,update_time)
             VALUES
                 (uuid(),${linkAddress},${linkName},now())
                ]]></sql>
        </sqlquery>
        <output>
            <field key="resultSet" jxpath="./data"/>
            <field key="result" jxpath="./r"/>
            <field key="errormessage" jxpath="./rmsg"/>
        </output>
    </json>
    <!--友情链接的删除-->
    <json id="delblogrollInfo">
        <sqlquery key="data" datatype="void" resultvar="r" resultmsgvar="rmsg">
            <sql><![CDATA[
                DELETE FROM blogroll WHERE blogrollId = ${blogrollId}
                ]]></sql>
        </sqlquery>
        <output>
            <field key="resultSet" jxpath="./data"/>
            <field key="result" jxpath="./r"/>
            <field key="errormessage" jxpath="./rmsg"/>
        </output>
    </json>
    <!--友情链接的修改-->
    <json id="updateblogrollInfo">
        <sqlquery key="data" datatype="void" resultvar="r" resultmsgvar="rmsg">
            <sql><![CDATA[
               UPDATE blogroll SET linkAddress = ${linkAddress}, linkName =  ${linkName}, update_time =now()
                WHERE blogrollId = ${blogrollId}
                ]]></sql>
        </sqlquery>
        <output>
            <field key="resultSet" jxpath="./data"/>
            <field key="result" jxpath="./r"/>
            <field key="errormessage" jxpath="./rmsg"/>
        </output>
    </json>
    <!--*****************************以上内容禁止修改、删除*****************************END-->

    <!--*****************************后台模块管理*****************************-->


    <!--加载找回密码验证码-->
    <json id="loadFindPwdCode">
        <sqlquery key="data" datatype="list" totalrowsvar="total" pagevar="page" pagesizevar="rows">
            <sql><![CDATA[
            SELECT * from findpwdcode where validateID=${id} and isdisable=0  and datediff(createtime,now())=0
                         ]]></sql>
        </sqlquery>
        <output>
            <field key="rows" jxpath="data"/>
            <field key="total" jxpath="total"/>
        </output>
    </json>

    <!--找回密码__重设密码-->
    <json id="update_findPwd_Reset">
        <sqlquery key="data" datatype="void" resultvar="r" resultmsgvar="rmsg">
            <sql><![CDATA[
                UPDATE student
                   SET studentPwd = upper(md5(${newpassword}))
                      WHERE studentID = (select studentID from findpwdcode where validateID=${id})
            ]]></sql>
        </sqlquery>
        <output>
            <field key="resultSet" jxpath="./data"/>
            <field key="result" jxpath="./r"/>
            <field key="errormessage" jxpath="./rmsg"/>
        </output>
    </json>
    <!--找回密码__修改验证ID状态-->
    <json id="edit_findpwdcodestatus">
        <sqlquery key="data" datatype="void" resultvar="r" resultmsgvar="rmsg">
            <sql><![CDATA[
                UPDATE findpwdcode
                   SET isdisable = 1
                      WHERE validateID = ${id}
            ]]></sql>
        </sqlquery>
        <output>
            <field key="resultSet" jxpath="./data"/>
            <field key="result" jxpath="./r"/>
            <field key="errormessage" jxpath="./rmsg"/>
        </output>
    </json>
    <!-- **********************************模块管理************************************ -->
    <!--加载找回密码验证码-->
    <json id="loadModeType">
        <sqlquery key="data" datatype="list" totalrowsvar="total" pagevar="page" pagesizevar="rows">
            <sql><![CDATA[
            SELECT * from modeltype
            WHERE 1=1
            AND CASE WHEN ${sqlStr} IS NOT NULL AND ${sqlStr}<>'' THEN modelName LIKE CONCAT('%', ${sqlStr},'%') ELSE 1=1 END
                         ]]></sql>
        </sqlquery>
        <output>
            <field key="rows" jxpath="data"/>
            <field key="total" jxpath="total"/>
        </output>
    </json>
    <json id="addModeType">
        <sqlquery key="data" datatype="void" resultvar="r" resultmsgvar="rmsg">
            <sql><![CDATA[
                insert into modeltype
                values (uuid(),${modelName})
            ]]></sql>
        </sqlquery>
        <output>
            <field key="resultSet" jxpath="./data"/>
            <field key="result" jxpath="./r"/>
            <field key="errormessage" jxpath="./rmsg"/>
        </output>
    </json>
    <json id="editModeType">
        <sqlquery key="data" datatype="void" resultvar="r" resultmsgvar="rmsg">
            <sql><![CDATA[
                UPDATE modeltype
                   SET modelName = ${modelName}
                      WHERE modelId = ${modelId}
            ]]></sql>
        </sqlquery>
        <output>
            <field key="resultSet" jxpath="./data"/>
            <field key="result" jxpath="./r"/>
            <field key="errormessage" jxpath="./rmsg"/>
        </output>
    </json>
    <json id="deleteModeType">
        <sqlquery key="data" datatype="void" resultvar="r" resultmsgvar="rmsg">
            <sql><![CDATA[
                delete from modeltype
                where modelId = ${modelId}
            ]]></sql>
        </sqlquery>
        <output>
            <field key="resultSet" jxpath="./data"/>
            <field key="result" jxpath="./r"/>
            <field key="errormessage" jxpath="./rmsg"/>
        </output>
    </json>
    <!--增加一条新闻-->
    <json id="addNews">
        <sqlquery key="data" datatype="void" resultvar="r" resultmsgvar="rmsg">
            <sql><![CDATA[
                INSERT INTO `news` (`newsId`,`moduleType`,`newsTitle`,`newsClass`,`newsDate`,`newsIcon`,`newsAuthor`,`newsDescribe`,
                        `isDelete`,`isTop`,`newsContent`,`createMan`,`createDate`,`newsFile`,`newsLevel`)
                VALUES(uuid(),${moduleType},${newsTitle},${newsClass},${newsDate},${newsIcon},${newsAuthor},${newsDescribe},${isDelete},${isTop},${newsContent},${loginName},now(),${newsFile},${newsLevel})
            ]]></sql>
        </sqlquery>
        <output>
            <field key="resultSet" jxpath="./data"/>
            <field key="result" jxpath="./r"/>
            <field key="errormessage" jxpath="./rmsg"/>
        </output>
    </json>
    <!--推荐一条新闻到学院新闻-->
    <json id="commendNews">
        <sqlquery key="data" datatype="void" resultvar="r" resultmsgvar="rmsg">
            <sql><![CDATA[
                INSERT INTO `news` (`newsId`,`moduleType`,`newsTitle`,`newsClass`,`newsDate`,`newsIcon`,`newsAuthor`,`newsDescribe`,
                        `isDelete`,`isTop`,`newsContent`,`createMan`,`createDate`,`newsFile`,`newsLevel`)
                VALUES(uuid(),${moduleType},${newsTitle},${newsClass},${newsDate},${newsIcon},${newsAuthor},${newsDescribe},${isDelete},${isTop},${newsContent},${loginName},now(),${newsFile},${newsLevel})
            ]]></sql>
        </sqlquery>
        <output>
            <field key="resultSet" jxpath="./data"/>
            <field key="result" jxpath="./r"/>
            <field key="errormessage" jxpath="./rmsg"/>
        </output>
    </json>
    <!--修改一条新闻-->
    <json id="editNews">
        <sqlquery key="data" datatype="void" resultvar="r" resultmsgvar="rmsg">
            <sql><![CDATA[
               UPDATE `news`
                  SET
                      `newsTitle` = ${newsTitle},
                      `newsDate` = ${newsDate},
                      `newsIcon` = ${newsIcon},
                      `newsAuthor` = ${newsAuthor},
                      `newsDescribe` = ${newsDescribe},
                      `isDelete` = ${isDelete},
                      `isTop` = ${isTop},
                      `newsContent` = ${newsContent},
                      `updateMan` = ${loginName},
                      `updateDate` = now(),
                        newsClass=${newsClass},
                      `newsFile` = ${newsFile},
                      `newsLevel` = ${newsLevel}
                    WHERE `newsId` = ${newsId}
            ]]></sql>
        </sqlquery>
        <output>
            <field key="resultSet" jxpath="./data"/>
            <field key="result" jxpath="./r"/>
            <field key="errormessage" jxpath="./rmsg"/>
        </output>
    </json>
    <!--修改单页新闻-->
    <json id="editsingleNews">
        <sqlquery key="data" datatype="void" resultvar="r" resultmsgvar="rmsg">
            <sql><![CDATA[
               UPDATE `news`
                  SET `newsContent` = ${newsContent},
                      `updateMan` = ${loginName},
                      `updateDate` = now()
                    WHERE `newsId` = ${newsId}
            ]]></sql>
        </sqlquery>
        <output>
            <field key="resultSet" jxpath="./data"/>
            <field key="result" jxpath="./r"/>
            <field key="errormessage" jxpath="./rmsg"/>
        </output>
    </json>
    <!--删除一条新闻-->
    <json id="deleteNews">
        <sqlquery key="data" datatype="void" resultvar="r" resultmsgvar="rmsg">
            <sql><![CDATA[
               DELETE FROM `news`  WHERE `newsId` = ${newsId}
            ]]></sql>
        </sqlquery>
        <output>
            <field key="resultSet" jxpath="./data"/>
            <field key="result" jxpath="./r"/>
            <field key="errormessage" jxpath="./rmsg"/>
        </output>
    </json>
    <!--加载新闻-->
    <json id="loadNews">
        <sqlquery key="data" datatype="list" totalrowsvar="total" pagevar="page" pagesizevar="rows">
            <sql><![CDATA[
            SELECT *,FROM_UNIXTIME(UNIX_TIMESTAMP(newsDate),'%Y-%m-%d') AS newsDates,
            FROM_UNIXTIME(UNIX_TIMESTAMP(newsDate),'%Y-%m-%d %H:%i:%s') AS newsDate,
            FROM_UNIXTIME(UNIX_TIMESTAMP(createDate),'%Y-%m-%d') AS createDates,
                    FROM_UNIXTIME(UNIX_TIMESTAMP(updateDate),'%Y-%m-%d') AS updateDates
             FROM news WHERE  moduleType=${moduleType} AND isDelete='是'
              AND CASE WHEN ${sqlStr} IS NOT NULL AND ${sqlStr}<>'' THEN newsTitle LIKE CONCAT('%', ${sqlStr},'%') ELSE 1=1 END
                AND CASE WHEN ${newsDescribe} IS NOT NULL AND ${newsDescribe}<>'' THEN newsDescribe=${newsDescribe} ELSE 1=1 END
              order by newsDate desc
                         ]]></sql>
        </sqlquery>
        <output>
            <field key="rows" jxpath="data"/>
            <field key="total" jxpath="total"/>
        </output>
    </json>
    <!--加载建筑系教授-->
    <json id="loadarcprofession">
        <sqlquery key="data" datatype="list" totalrowsvar="total" pagevar="page" pagesizevar="rows">
            <sql><![CDATA[
            SELECT *,FROM_UNIXTIME(UNIX_TIMESTAMP(newsDate),'%Y-%m-%d') AS newsDates,
            FROM_UNIXTIME(UNIX_TIMESTAMP(newsDate),'%Y-%m-%d %H:%i:%s') AS newsDate,
            FROM_UNIXTIME(UNIX_TIMESTAMP(createDate),'%Y-%m-%d') AS createDates,
                    FROM_UNIXTIME(UNIX_TIMESTAMP(updateDate),'%Y-%m-%d') AS updateDates
             FROM news WHERE  moduleType=${moduleType} AND isDelete='是'
              AND CASE WHEN ${sqlStr} IS NOT NULL AND ${sqlStr}<>'' THEN newsTitle LIKE CONCAT('%', ${sqlStr},'%') ELSE 1=1 END
                AND CASE WHEN ${newsDescribe} IS NOT NULL AND ${newsDescribe}<>'' THEN newsDescribe=${newsDescribe} ELSE 1=1 END
              order by newsDate
                         ]]></sql>
        </sqlquery>
        <output>
            <field key="rows" jxpath="data"/>
            <field key="total" jxpath="total"/>
        </output>
    </json>
    <!--加载建筑系副教授-->
    <json id="loadadarcprofession">
        <sqlquery key="data" datatype="list" totalrowsvar="total" pagevar="page" pagesizevar="rows">
            <sql><![CDATA[
            SELECT *,FROM_UNIXTIME(UNIX_TIMESTAMP(newsDate),'%Y-%m-%d') AS newsDates,
            FROM_UNIXTIME(UNIX_TIMESTAMP(newsDate),'%Y-%m-%d %H:%i:%s') AS newsDate,
            FROM_UNIXTIME(UNIX_TIMESTAMP(createDate),'%Y-%m-%d') AS createDates,
                    FROM_UNIXTIME(UNIX_TIMESTAMP(updateDate),'%Y-%m-%d') AS updateDates
             FROM news WHERE  moduleType=${moduleType} AND isDelete='是'
              AND CASE WHEN ${sqlStr} IS NOT NULL AND ${sqlStr}<>'' THEN newsTitle LIKE CONCAT('%', ${sqlStr},'%') ELSE 1=1 END
                AND CASE WHEN ${newsDescribe} IS NOT NULL AND ${newsDescribe}<>'' THEN newsDescribe=${newsDescribe} ELSE 1=1 END
              order by newsDate
                         ]]></sql>
        </sqlquery>
        <output>
            <field key="rows" jxpath="data"/>
            <field key="total" jxpath="total"/>
        </output>
    </json>
    <!--加载建筑系讲师-->
    <json id="loadarclecture">
        <sqlquery key="data" datatype="list" totalrowsvar="total" pagevar="page" pagesizevar="rows">
            <sql><![CDATA[
            SELECT *,FROM_UNIXTIME(UNIX_TIMESTAMP(newsDate),'%Y-%m-%d') AS newsDates,
            FROM_UNIXTIME(UNIX_TIMESTAMP(newsDate),'%Y-%m-%d %H:%i:%s') AS newsDate,
            FROM_UNIXTIME(UNIX_TIMESTAMP(createDate),'%Y-%m-%d') AS createDates,
                    FROM_UNIXTIME(UNIX_TIMESTAMP(updateDate),'%Y-%m-%d') AS updateDates
             FROM news WHERE  moduleType=${moduleType} AND isDelete='是'
              AND CASE WHEN ${sqlStr} IS NOT NULL AND ${sqlStr}<>'' THEN newsTitle LIKE CONCAT('%', ${sqlStr},'%') ELSE 1=1 END
                AND CASE WHEN ${newsDescribe} IS NOT NULL AND ${newsDescribe}<>'' THEN newsDescribe=${newsDescribe} ELSE 1=1 END
              order by newsDate desc
                         ]]></sql>
        </sqlquery>
        <output>
            <field key="rows" jxpath="data"/>
            <field key="total" jxpath="total"/>
        </output>
    </json>
    <!--加载城乡规划系教授-->
    <json id="loadlayprofession">
        <sqlquery key="data" datatype="list" totalrowsvar="total" pagevar="page" pagesizevar="rows">
            <sql><![CDATA[
            SELECT *,FROM_UNIXTIME(UNIX_TIMESTAMP(newsDate),'%Y-%m-%d') AS newsDates,
            FROM_UNIXTIME(UNIX_TIMESTAMP(newsDate),'%Y-%m-%d %H:%i:%s') AS newsDate,
            FROM_UNIXTIME(UNIX_TIMESTAMP(createDate),'%Y-%m-%d') AS createDates,
                    FROM_UNIXTIME(UNIX_TIMESTAMP(updateDate),'%Y-%m-%d') AS updateDates
             FROM news WHERE  moduleType=${moduleType} AND isDelete='是'
              AND CASE WHEN ${sqlStr} IS NOT NULL AND ${sqlStr}<>'' THEN newsTitle LIKE CONCAT('%', ${sqlStr},'%') ELSE 1=1 END
                AND CASE WHEN ${newsDescribe} IS NOT NULL AND ${newsDescribe}<>'' THEN newsDescribe=${newsDescribe} ELSE 1=1 END
              order by newsDate
                         ]]></sql>
        </sqlquery>
        <output>
            <field key="rows" jxpath="data"/>
            <field key="total" jxpath="total"/>
        </output>
    </json>
    <!--加载城乡规划系副教授-->
    <json id="loadlayadprofession">
        <sqlquery key="data" datatype="list" totalrowsvar="total" pagevar="page" pagesizevar="rows">
            <sql><![CDATA[
            SELECT *,FROM_UNIXTIME(UNIX_TIMESTAMP(newsDate),'%Y-%m-%d') AS newsDates,
            FROM_UNIXTIME(UNIX_TIMESTAMP(newsDate),'%Y-%m-%d %H:%i:%s') AS newsDate,
            FROM_UNIXTIME(UNIX_TIMESTAMP(createDate),'%Y-%m-%d') AS createDates,
                    FROM_UNIXTIME(UNIX_TIMESTAMP(updateDate),'%Y-%m-%d') AS updateDates
             FROM news WHERE  moduleType=${moduleType} AND isDelete='是'
              AND CASE WHEN ${sqlStr} IS NOT NULL AND ${sqlStr}<>'' THEN newsTitle LIKE CONCAT('%', ${sqlStr},'%') ELSE 1=1 END
                AND CASE WHEN ${newsDescribe} IS NOT NULL AND ${newsDescribe}<>'' THEN newsDescribe=${newsDescribe} ELSE 1=1 END
              order by newsDate
                         ]]></sql>
        </sqlquery>
        <output>
            <field key="rows" jxpath="data"/>
            <field key="total" jxpath="total"/>
        </output>
    </json>
    <!--加载城乡规划系讲师-->
    <json id="loadlaylecture">
        <sqlquery key="data" datatype="list" totalrowsvar="total" pagevar="page" pagesizevar="rows">
            <sql><![CDATA[
            SELECT *,FROM_UNIXTIME(UNIX_TIMESTAMP(newsDate),'%Y-%m-%d') AS newsDates,
            FROM_UNIXTIME(UNIX_TIMESTAMP(newsDate),'%Y-%m-%d %H:%i:%s') AS newsDate,
            FROM_UNIXTIME(UNIX_TIMESTAMP(createDate),'%Y-%m-%d') AS createDates,
                    FROM_UNIXTIME(UNIX_TIMESTAMP(updateDate),'%Y-%m-%d') AS updateDates
             FROM news WHERE  moduleType=${moduleType} AND isDelete='是'
              AND CASE WHEN ${sqlStr} IS NOT NULL AND ${sqlStr}<>'' THEN newsTitle LIKE CONCAT('%', ${sqlStr},'%') ELSE 1=1 END
                AND CASE WHEN ${newsDescribe} IS NOT NULL AND ${newsDescribe}<>'' THEN newsDescribe=${newsDescribe} ELSE 1=1 END
              order by newsDate
                         ]]></sql>
        </sqlquery>
        <output>
            <field key="rows" jxpath="data"/>
            <field key="total" jxpath="total"/>
        </output>
    </json>
    <!--加载实验中心实验员-->
    <json id="loadexppeople">
        <sqlquery key="data" datatype="list" totalrowsvar="total" pagevar="page" pagesizevar="rows">
            <sql><![CDATA[
            SELECT *,FROM_UNIXTIME(UNIX_TIMESTAMP(newsDate),'%Y-%m-%d') AS newsDates,
            FROM_UNIXTIME(UNIX_TIMESTAMP(newsDate),'%Y-%m-%d %H:%i:%s') AS newsDate,
            FROM_UNIXTIME(UNIX_TIMESTAMP(createDate),'%Y-%m-%d') AS createDates,
                    FROM_UNIXTIME(UNIX_TIMESTAMP(updateDate),'%Y-%m-%d') AS updateDates
             FROM news WHERE  moduleType=${moduleType} AND isDelete='是'
              AND CASE WHEN ${sqlStr} IS NOT NULL AND ${sqlStr}<>'' THEN newsTitle LIKE CONCAT('%', ${sqlStr},'%') ELSE 1=1 END
                AND CASE WHEN ${newsDescribe} IS NOT NULL AND ${newsDescribe}<>'' THEN newsDescribe=${newsDescribe} ELSE 1=1 END
              order by newsDate
                         ]]></sql>
        </sqlquery>
        <output>
            <field key="rows" jxpath="data"/>
            <field key="total" jxpath="total"/>
        </output>
    </json>
    <!--加载基层组织机构介绍-->
    <json id="loadIntroduce">
        <sqlquery key="data" datatype="list" totalrowsvar="total" pagevar="page" pagesizevar="rows">
            <sql><![CDATA[
            SELECT *,FROM_UNIXTIME(UNIX_TIMESTAMP(newsDate),'%Y-%m-%d') AS newsDates,
            FROM_UNIXTIME(UNIX_TIMESTAMP(newsDate),'%Y-%m-%d %H:%i:%s') AS newsDate,
            FROM_UNIXTIME(UNIX_TIMESTAMP(createDate),'%Y-%m-%d') AS createDates,
                    FROM_UNIXTIME(UNIX_TIMESTAMP(updateDate),'%Y-%m-%d') AS updateDates
             FROM news WHERE  moduleType=${moduleType} AND isDelete='是'
              AND CASE WHEN ${sqlStr} IS NOT NULL AND ${sqlStr}<>'' THEN newsTitle LIKE CONCAT('%', ${sqlStr},'%') ELSE 1=1 END
                AND CASE WHEN ${newsDescribe} IS NOT NULL AND ${newsDescribe}<>'' THEN newsDescribe=${newsDescribe} ELSE 1=1 END
              order by newsDate desc
                         ]]></sql>
        </sqlquery>
        <output>
            <field key="rows" jxpath="data"/>
            <field key="total" jxpath="total"/>
        </output>
    </json>

    <!--加载学院领导-->
    <json id="loadCollegeLeader">
        <sqlquery key="data" datatype="list" totalrowsvar="total" pagevar="page" pagesizevar="rows">
            <sql><![CDATA[
            SELECT *,FROM_UNIXTIME(UNIX_TIMESTAMP(newsDate),'%Y-%m-%d') AS newsDates,
            FROM_UNIXTIME(UNIX_TIMESTAMP(newsDate),'%Y-%m-%d %H:%i:%s') AS newsDate,
            FROM_UNIXTIME(UNIX_TIMESTAMP(createDate),'%Y-%m-%d') AS createDates,
                    FROM_UNIXTIME(UNIX_TIMESTAMP(updateDate),'%Y-%m-%d') AS updateDates
             FROM news WHERE  moduleType=${moduleType} AND isDelete='是'
              AND CASE WHEN ${sqlStr} IS NOT NULL AND ${sqlStr}<>'' THEN newsTitle LIKE CONCAT('%', ${sqlStr},'%') ELSE 1=1 END
              order by newsDescribe
                         ]]></sql>
        </sqlquery>
        <output>
            <field key="rows" jxpath="data"/>
            <field key="total" jxpath="total"/>
        </output>
    </json>
    <!--加载链接-->
    <json id="loadLink">
        <sqlquery key="data" datatype="list" totalrowsvar="total" pagevar="page" pagesizevar="rows">
            <sql><![CDATA[
            SELECT *,FROM_UNIXTIME(UNIX_TIMESTAMP(updatetime),'%Y-%m-%d') AS updatetime
             FROM link WHERE  linkClass=${linkClass}
              order by updatetime desc
                         ]]></sql>
        </sqlquery>
        <output>
            <field key="rows" jxpath="data"/>
            <field key="total" jxpath="total"/>
        </output>
    </json>
    <!--删除一条链接-->
    <json id="deleteLink">
        <sqlquery key="data" datatype="void" resultvar="r" resultmsgvar="rmsg">
            <sql><![CDATA[
               DELETE FROM `link`  WHERE `linkId` = ${linkId}
            ]]></sql>
        </sqlquery>
        <output>
            <field key="resultSet" jxpath="./data"/>
            <field key="result" jxpath="./r"/>
            <field key="errormessage" jxpath="./rmsg"/>
        </output>
    </json>
    <!--修改一条链接-->
    <json id="updateLink">
        <sqlquery key="data" datatype="void" resultvar="r" resultmsgvar="rmsg">
            <sql><![CDATA[
               UPDATE `link`
                  SET
                      `linkName` = ${linkName},
                      `linkContent` = ${linkContent}
                    WHERE `linkId` = ${linkId}
            ]]></sql>
        </sqlquery>
        <output>
            <field key="resultSet" jxpath="./data"/>
            <field key="result" jxpath="./r"/>
            <field key="errormessage" jxpath="./rmsg"/>
        </output>
    </json>
    <!--增加一条链接-->
    <json id="addLink">
        <sqlquery key="data" datatype="void" resultvar="r" resultmsgvar="rmsg">
            <sql><![CDATA[
                INSERT INTO `link` (`linkId`,`linkClass`,linkName,`linkContent`,`updatetime`)
                VALUES(uuid(),${linkClass},${linkName},${linkContent},now())
            ]]></sql>
        </sqlquery>
        <output>
            <field key="resultSet" jxpath="./data"/>
            <field key="result" jxpath="./r"/>
            <field key="errormessage" jxpath="./rmsg"/>
        </output>
    </json>
    <!--增加一条作品-->
    <json id="addProduction">
        <sqlquery key="data" datatype="void" resultvar="r" resultmsgvar="rmsg">
            <sql><![CDATA[
                INSERT INTO `production` (`productionId`,`productionClass`,`moduleType`,`productionAuthor`,`productionName`,`productionMemo`,`productionLink`,`createDate`)
                VALUES(uuid(),${productionClass},${moduleType},${productionAuthor},${productionName},${productionMemo},${productionLink},now())
            ]]></sql>
        </sqlquery>
        <output>
            <field key="resultSet" jxpath="./data"/>
            <field key="result" jxpath="./r"/>
            <field key="errormessage" jxpath="./rmsg"/>
        </output>
    </json>
    <!--修改一条作品-->
    <json id="editProduction">
        <sqlquery key="data" datatype="void" resultvar="r" resultmsgvar="rmsg">
            <sql><![CDATA[
               UPDATE `production`
                  SET
                      `productionClass` = ${productionClass},
                      `productionAuthor` = ${productionAuthor},
                       productionName=${productionName},
                      productionMemo=${productionMemo},
                      productionLink=${productionLink}
                    WHERE `productionId` = ${productionId}
            ]]></sql>
        </sqlquery>
        <output>
            <field key="resultSet" jxpath="./data"/>
            <field key="result" jxpath="./r"/>
            <field key="errormessage" jxpath="./rmsg"/>
        </output>
    </json>
    <!--删除一条作品-->
    <json id="deleteProduction">
        <sqlquery key="data" datatype="void" resultvar="r" resultmsgvar="rmsg">
            <sql><![CDATA[
               DELETE FROM `production`  WHERE `productionId` = ${productionId}
            ]]></sql>
        </sqlquery>
        <output>
            <field key="resultSet" jxpath="./data"/>
            <field key="result" jxpath="./r"/>
            <field key="errormessage" jxpath="./rmsg"/>
        </output>
    </json>
    <!--加载作品-->
    <json id="loadProduction">
        <sqlquery key="data" datatype="list" totalrowsvar="total" pagevar="page" pagesizevar="rows">
            <sql><![CDATA[
            SELECT *,FROM_UNIXTIME(UNIX_TIMESTAMP(createDate),'%Y-%m-%d') AS createDate
             FROM production WHERE 1=1
              AND CASE WHEN ${moduleType} IS NOT NULL AND ${moduleType}<>'' THEN moduleType=${moduleType} ELSE 1=1 END
              AND CASE WHEN ${productionClass} IS NOT NULL AND ${productionClass}<>'' THEN productionClass=${productionClass} ELSE 1=1 END
              order by createDate desc
                         ]]></sql>
        </sqlquery>
        <output>
            <field key="rows" jxpath="data"/>
            <field key="total" jxpath="total"/>
        </output>
    </json>
    <!--加载新闻图片-->
    <json id="loadNewsimg">
        <sqlquery key="data" datatype="list" totalrowsvar="total" pagevar="page" pagesizevar="rows">
            <sql><![CDATA[
            SELECT *,FROM_UNIXTIME(UNIX_TIMESTAMP(updatetime),'%Y-%m-%d') AS updatetime FROM newsimg order by imgName desc
                         ]]></sql>
        </sqlquery>
        <output>
            <field key="rows" jxpath="data"/>
            <field key="total" jxpath="total"/>
        </output>
    </json>
    <!--修改一条新闻图片-->
    <json id="updateNewsimg">
        <sqlquery key="data" datatype="void" resultvar="r" resultmsgvar="rmsg">
            <sql><![CDATA[
               UPDATE `newsimg`
                  SET
                      `imgLink` = ${imgLink},
                      `updatetime` = now()
                    WHERE `id` = ${id}
            ]]></sql>
        </sqlquery>
        <output>
            <field key="resultSet" jxpath="./data"/>
            <field key="result" jxpath="./r"/>
            <field key="errormessage" jxpath="./rmsg"/>
        </output>
    </json>
    <!--加载图片轮播-->
    <json id="loadWheelimg">
        <sqlquery key="data" datatype="list" totalrowsvar="total" pagevar="page" pagesizevar="rows">
            <sql><![CDATA[
            SELECT *,FROM_UNIXTIME(UNIX_TIMESTAMP(updatetime),'%Y-%m-%d') AS updatetime FROM wheelimg order by sort desc
                         ]]></sql>
        </sqlquery>
        <output>
            <field key="rows" jxpath="data"/>
            <field key="total" jxpath="total"/>
        </output>
    </json>
    <!--修改图片轮播-->
    <json id="updateWheelimg">
        <sqlquery key="data" datatype="void" resultvar="r" resultmsgvar="rmsg">
            <sql><![CDATA[
               UPDATE `wheelimg`
                  SET
                      `img` = ${img},
                       `sort` = ${sort},
                      `updatetime` = now()
                    WHERE `id` = ${id}
            ]]></sql>
        </sqlquery>
        <output>
            <field key="resultSet" jxpath="./data"/>
            <field key="result" jxpath="./r"/>
            <field key="errormessage" jxpath="./rmsg"/>
        </output>
    </json>
    <!--加载教师-->
    <json id="loadTeacher">
        <sqlquery key="data" datatype="list" totalrowsvar="total" pagevar="page" pagesizevar="rows">
            <sql><![CDATA[
            SELECT *,FROM_UNIXTIME(UNIX_TIMESTAMP(newsDate),'%Y-%m-%d') AS newsDates,
            FROM_UNIXTIME(UNIX_TIMESTAMP(newsDate),'%Y-%m-%d %H:%i:%s') AS newsDate,
            FROM_UNIXTIME(UNIX_TIMESTAMP(createDate),'%Y-%m-%d') AS createDates,
            FROM_UNIXTIME(UNIX_TIMESTAMP(updateDate),'%Y-%m-%d') AS updateDates
            FROM news WHERE 1=1
            AND CASE WHEN ${newsClass} IS NOT NULL AND ${newsClass}<>'' THEN newsClass=${newsClass} ELSE 1=1 END
            AND newsDescribe="已通过"
            AND newsId!="49ddb4a3-c440-11e6-b626-00ac7dc2f176"
            order by newsTitle desc
                         ]]></sql>
        </sqlquery>
        <output>
            <field key="rows" jxpath="data"/>
            <field key="total" jxpath="total"/>
        </output>
    </json>
    <!--加载模板-->
    <json id="loadModel">
        <sqlquery key="data" datatype="list" totalrowsvar="total" pagevar="page" pagesizevar="rows">
            <sql><![CDATA[
            SELECT newsContent from news where newsId="49ddb4a3-c440-11e6-b626-00ac7dc2f176"
             ]]></sql>
        </sqlquery>
        <output>
            <field key="rows" jxpath="data"/>
            <field key="total" jxpath="total"/>
        </output>
    </json>
    <!--加载教师-->
    <json id="loadStutsTeacher">
        <sqlquery key="data" datatype="list" totalrowsvar="total" pagevar="page" pagesizevar="rows"  resultvar="r">
            <sql><![CDATA[
            SELECT *,FROM_UNIXTIME(UNIX_TIMESTAMP(newsDate),'%Y-%m-%d') AS newsDates,
            FROM_UNIXTIME(UNIX_TIMESTAMP(newsDate),'%Y-%m-%d %H:%i:%s') AS newsDate,
            FROM_UNIXTIME(UNIX_TIMESTAMP(createDate),'%Y-%m-%d') AS createDates,
            FROM_UNIXTIME(UNIX_TIMESTAMP(updateDate),'%Y-%m-%d') AS updateDates
            FROM news WHERE newsClass in ("专职教师","兼职教师")
            AND CASE WHEN ${sqlStr} IS NOT NULL AND ${sqlStr}<>'' THEN newsTitle like concat('%',${sqlStr},'%') ELSE 1=1 END
            AND newsId!="49ddb4a3-c440-11e6-b626-00ac7dc2f176"
            order by newsTitle desc
                         ]]></sql>
        </sqlquery>
        <output>
            <field key="rows" jxpath="data"/>
            <field key="total" jxpath="total"/>
            <field key="result" jxpath="r"/>

        </output>
    </json>
    <!--加载背景图片-->
    <json id="loadbackgroud">
        <sqlquery key="data" datatype="list" totalrowsvar="total" pagevar="page" pagesizevar="rows">
            <sql><![CDATA[
            SELECT * from wheelimg order by sort
                         ]]></sql>
        </sqlquery>
        <output>
            <field key="rows" jxpath="data"/>
            <field key="total" jxpath="total"/>
        </output>
    </json>
    <!--加载教师菜单-->
    <json id="loadMenuByParent">
        <sqlquery key="data" datatype="list" totalrowsvar="total" pagevar="page" pagesizevar="rows">
            <sql><![CDATA[
            SELECT *  FROM sysmenu WHERE  parent_menuid=${parent_menuid}
                         ]]></sql>
        </sqlquery>
        <output>
            <field key="rows" jxpath="data"/>
            <field key="total" jxpath="total"/>
        </output>
    </json>
    <!--统计次数-->
    <json id="statistics">
        <sqlquery key="data" datatype="void" resultvar="r" resultmsgvar="rmsg">
            <sql><![CDATA[
                UPDATE statistics
                SET COUNT = COUNT +1
                WHERE statisticsId = ${statisticsId}
            ]]></sql>
        </sqlquery>
        <output>
            <field key="resultSet" jxpath="./data"/>
            <field key="result" jxpath="./r"/>
            <field key="errormessage" jxpath="./rmsg"/>
        </output>
    </json>
    <!--查询id对应的基层组织-->
    <json id="fontloadidorganization">
        <sqlquery key="data" datatype="list" totalrowsvar="total" pagevar="page" pagesizevar="rows">
            <sql><![CDATA[
            SELECT * from organization where organizationId=${organizationId}
                         ]]></sql>
        </sqlquery>
        <output>
            <field key="rows" jxpath="data"/>
            <field key="total" jxpath="total"/>
        </output>
    </json>
    <json id="loadMenu">
        <sqlquery key="data" datatype="list" totalrowsvar="total" pagevar="page" pagesizevar="rows">
            <sql><![CDATA[
            SELECT * from sysmenu where sysmenu_id=${sysmenu_id}
                         ]]></sql>
        </sqlquery>
        <output>
            <field key="rows" jxpath="data"/>
            <field key="total" jxpath="total"/>
        </output>
    </json>
    <json id="loadRole">
        <sqlquery key="data" datatype="list" totalrowsvar="total" pagevar="page" pagesizevar="rows">
            <sql><![CDATA[
            SELECT * from sysrole  order by sysrole_name
                         ]]></sql>
        </sqlquery>
        <output>
            <field key="rows" jxpath="data"/>
            <field key="total" jxpath="total"/>
        </output>
    </json>
</beans>

